<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/plugin/bganimation/bg.css">

  

  <link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" rel="stylesheet" type="text/css">
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <div class="outer">
        <div class="widget-wrap mobile-header">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars0.githubusercontent.com/u/20333903?v=3&amp;s=460">
    <h2 class="author">John Doe</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>45</strong><br>文章</div></a>
      <a href="/categories"><div><strong>0</strong><br>分类</div></a>
      <a href="/tags"><div><strong>0</strong><br>标签</div></a>
    </div>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

        <section id="main">
  
    <article id="post-3.同步机制" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/3.%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:54:35.032Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="同步机制"><a class="markdownIt-Anchor" href="#同步机制"></a> 同步机制</h3>
<p>InnoDB存储引擎同步机制由sync模块实现，主要实现mutex（互斥量）以及rw-lock（读写锁）。没有使用操作系统自带的，而是自己进行了封装，并提供spin（自旋）和wait array（等待队列）设计提高性能</p>
<h4 id="31-相关文件"><a class="markdownIt-Anchor" href="#31-相关文件"></a> 3.1 相关文件</h4>
<h4 id="32-基础知识"><a class="markdownIt-Anchor" href="#32-基础知识"></a> 3.2 基础知识</h4>
<p>mutex对象是用来进行Mutual Exclusion（互斥）操作，目的是再多线程并发访问时保证共享数据的正确性。</p>
<p>linux可以提供以下数据结构进行互斥</p>
<ol>
<li>spin lock</li>
<li>semephore</li>
<li>monitor</li>
<li>sequencer</li>
</ol>
<h5 id="321-memory-model"><a class="markdownIt-Anchor" href="#321-memory-model"></a> 3.2.1 memory model</h5>
<p>内存模型决定了cpu怎么访问内存，以及并发情况下多cpu对内存的影响</p>
<p>不同内存模型的差异是在于硬件以怎么样的顺序对内存数据进行load和store</p>
<p>最简单的内存模型是（sequential memory model）顺序内存模型。所有的读写操作都是按照程序允许顺序执行的。而且要求cpu或者I/O设备读写数据操作是原子性的。开始后不能被其他内存操作中断</p>
<p>还有total storememory model和partial store memory model</p>
<h5 id="322-mutual-exclution"><a class="markdownIt-Anchor" href="#322-mutual-exclution"></a> 3.2.2 mutual exclution</h5>
<p>两个或多个cpu同时访问临界区时会产生竞争条件。为了消除这种问题，需要互斥。</p>
<h5 id="323-atomic-read-modify-write-operation"><a class="markdownIt-Anchor" href="#323-atomic-read-modify-write-operation"></a> 3.2.3 Atomic Read-Modify-Write Operation</h5>
<p>为了一次只有一个cpu访问临界区，硬件都提供了基于原子操作的read-modify-write。</p>
<p>目前cpu都支持test-and-set（TAS），从内存读取一个字节或一个word（4个字节），然后和0比较，无条件的将其再内存的值置为1.这是给原子操作，这是其他cpu或I/O设备不能访问总线。提供TAS，操作系统可以构造更高级别的同步操作，自旋锁，信号量等</p>
<p>最基本的TAS指令就是swap-atomic操作。将寄存器的值和内存的值交互，提供swap-atomic可以构造TAS操作。将寄存器值置为1，执行atomic-swap，和寄存器中的值比较</p>
<h5 id="324-spin-lock"><a class="markdownIt-Anchor" href="#324-spin-lock"></a> 3.2.4 spin lock</h5>
<p>spin-lock依赖互斥的代码应该比较少，快速释放spin-lock。</p>
<p>spin-lock执行通过先加锁后节点实现，然而乱序可能带来问题，所有要加内存屏障。</p>
<h5 id="325-死锁"><a class="markdownIt-Anchor" href="#325-死锁"></a> 3.2.5 死锁</h5>
<h4 id="33-innodb同步机制"><a class="markdownIt-Anchor" href="#33-innodb同步机制"></a> 3.3 InnoDB同步机制</h4>
<p>InnoDB同步机制：mutex，完全互斥，rw-lock，读锁允许并发读，写锁完全互斥</p>
<h5 id="331-mutex"><a class="markdownIt-Anchor" href="#331-mutex"></a> 3.3.1 mutex</h5>
<p>mutex_struct是InnoDB互斥数据结构。mutex采用TAS命令，与spin-lock不同之处</p>
<ol>
<li>当返回1时，先自旋（不用反复执行TAS，因为自旋判断值是从L1 cache或L2 cache获取，不用读内存）</li>
<li>自旋一段时间不能获得mutex，放入wait_array等待唤醒（不将进程放到等待队列，因为切换上下文需要开销）</li>
</ol>
<p>InnoDB实现自旋的目的</p>
<ol>
<li>减少内存访问</li>
<li>减少上下文切换</li>
</ol>
<p>使用mutex保护，临界区一般是1-20us，最长时间发生在索引节点的二叉查找。所以默认自旋20us</p>
<p>线程不能获得mutex时，先从wait_array分配一个cell，然后将mutex-&gt;waiter设置为1.然后再进行TAS判断。防止分配完cell时mutex线程释放资源并唤醒等待线程，由于未置1而不被唤醒，产生永远等待</p>
<p>InnoDB没有使用内存屏障解决乱序问题，而是后台一个线程定期调用换上检测是否由无限等待的mutex，有就唤醒</p>
<h4 id="332-rw-lock"><a class="markdownIt-Anchor" href="#332-rw-lock"></a> # 3.3.2 rw-lock</h4>
<p>为了提高并发，允许临界资源共享读取，</p>
<p>rw-lock使用FIFO的调度策略</p>
<p>写锁可以递归使用，读锁数据结构没有定义持有的线程id，所以无法递归</p>
<p>同mutex，不能获得锁时先自旋，然后放入wait_array队列</p>
<h5 id="333-wait-array"><a class="markdownIt-Anchor" href="#333-wait-array"></a> 3.3.3 wait array</h5>
<p>InnoDB引擎有一个全局wait array对象sync_primary_wait_array用来对等待latch线程唤醒，默认创建100个cell的等待队列，当队列1000个cell分配完，InnoDB会发生宕机。申请到cell后，等待线程会休眠，等待被唤醒</p>
<h5 id="334-死锁检测"><a class="markdownIt-Anchor" href="#334-死锁检测"></a> 3.3.4 死锁检测</h5>
<p>InnoDB实现latch同时，开启UNIV_SYNC_DEBUG模式，支持对latch加锁进行AB-BA死锁检测。InnoDB定义了每个latch的优先级，每个线程根据这个顺序加锁就不会产生AB-BA死锁</p>
<p>sync_thread_struct存储每个线程持有的latch信息，内部包含了sync_level_struct，表示每个线程持有的每个latch的level信息</p>
<p>死锁仅发生在等待的场景下，当进程放入symc_primary_wait_array的cell中时调用死锁检测函数检测死锁（使用深度优先遍历算法）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/3.%E5%90%8C%E6%AD%A5%E6%9C%BA%E5%88%B6/" data-id="ckmixc6t600075cvx7was69h1" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-2.基本数据结构和算法" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/2.%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:54:35.028Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="基本数据结构和算法"><a class="markdownIt-Anchor" href="#基本数据结构和算法"></a> 基本数据结构和算法</h3>
<h4 id="21-相关文件"><a class="markdownIt-Anchor" href="#21-相关文件"></a> 2.1 相关文件</h4>
<h4 id="22-内存管理系统"><a class="markdownIt-Anchor" href="#22-内存管理系统"></a> 2.2 内存管理系统</h4>
<p>这里的内存管理不是管理缓冲池中的页，儿是管理InnoDB引擎运行时动态生成的数据结构对象。</p>
<h5 id="221-内存管理"><a class="markdownIt-Anchor" href="#221-内存管理"></a> 2.2.1 内存管理</h5>
<p>InnoDB引擎不直接使用malloc和free管理内存</p>
<p>InnoDB引擎使用内存堆的方式来进行内存对象管理，可以一次性分配大块内存，不需要按需分配。Innodb还可以从缓冲池分配内存建立堆内存（16KB），更快的请求内存页，称为缓冲池分配，使用malloc分配内存的方法称为动态分配。</p>
<p>InnoDB存储引擎的内存管理层次结构</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210309140549311.png" alt="image-20210309140549311" /></p>
<p>最顶层是内存堆，存放各自用途的内存堆对象</p>
<p>下面是内存池和缓冲池。</p>
<p>通过mem_area_alloc可以从内存池建立一个内存堆或为内存堆增加一个内存块</p>
<p>通过buf_frame_alloc可以从缓冲池分配一整页大小的内存空间。</p>
<p>最下面是系统内存。</p>
<p>从操作系统分配叫动态分配，从缓冲池分配叫缓冲池分配。</p>
<p>内存堆相对于一个栈，通过不断增加内存块对象来增长空间，，只能先释放栈顶的内存块或一次性全部释放。从这个栈中可以分配更小的内存卡，也就是内存栈的功能。</p>
<p>InnoDB引擎使用数据结构mem_block_t表示内存堆中每次从操作系统或缓冲池分配的内存块。</p>
<p>本质上看，内存堆就是一系列相连接内存块。内存块头部包含mem_block_info_t存储内存块元数据信息。</p>
<p>内存堆使用第一个内存块的base字段将堆中的所有内存块根据进堆顺序链接起来。</p>
<p>Innodb定义了三种内存堆类型</p>
<ol>
<li>MEM_HEAP_DYNAMIC堆的内存调用通用内存池接口申请（阈值是8KB）</li>
<li>MEM_HEAP_BUFFER堆是内存是从缓冲池申请（阈值是缓存页框-200，默认是16KB）</li>
<li>MEM_HEAP_BTR_SEARCH是MEM_HEAP_BUFFER的子类型，仅在自适应哈希索引中使用</li>
</ol>
<p>分配内存块空间大小的三种方式：</p>
<ol>
<li>指定初始内存指针和大小，该方法无须进行内存分配</li>
<li>指定初始块大小</li>
<li>不指定初值指针和大小</li>
</ol>
<p>如果是第三者，系统分配默认大小为MEM_BLOCK_START_SIZE(64B)的内存块建堆，需要更多空间时，额外的内存块连接到链表，以后每次分配的大小是前一次的两倍，知道到达设置的阈值，之后每次分配阈值大小的内存块。</p>
<p>但调用者请求分配内存大于阈值不受限制。</p>
<h5 id="222-通用内存池"><a class="markdownIt-Anchor" href="#222-通用内存池"></a> 2.2.2 通用内存池</h5>
<p>InnoDB启动后，会实例一个mem_comm_pool对象，称为通用内存池，在InnoDB启动进行内存管理初始化时调用mem_pool_create创建。通用内存池服务于内存堆，进行小块内存分配，通常分配一些InnoDB引擎内存数据对象。</p>
<p>内存池通过free_list[64]和mem_area_struct组成内部伙伴系统解决内存碎片问题。</p>
<p>把内存池分组为64个内存区链表（就是不同链表的大小都不同）。内存块区的最小大小为mem_area_struct（内存区的结构体）对其后的两倍。</p>
<p>需要64B对象，就去free_list[6]找，找不到去free_list[7]找128然后分裂给6</p>
<h4 id="23-哈希表"><a class="markdownIt-Anchor" href="#23-哈希表"></a> 2.3 哈希表</h4>
<h5 id="231-哈希算法"><a class="markdownIt-Anchor" href="#231-哈希算法"></a> 2.3.1 哈希算法</h5>
<h5 id="232-数据结构"><a class="markdownIt-Anchor" href="#232-数据结构"></a> 2.3.2 数据结构</h5>
<p>hash_table_struct是InnoDB定义的哈希表结构，数组的存储类型是void*，因为要存储各种类型数据</p>
<p>哈希表的槽数设置位素数，可以使用函数ut_find_prime返回一个大于n的素数。</p>
<p>缓冲池的哈希表由数据结构buf_pool_struct的互斥量控制并发</p>
<p>自适应哈希索引使用的哈希表由全部的读/写锁btr_search_latch控制并发</p>
<p>InnoDB哈希表使用链地址法解决哈希冲突。但是哈希表不存链的定义</p>
<p>可以提供存储的对象自己保存的哈希链或自己创建哈希链</p>
<p>如哈希表存缓冲池的页，此时哈希链存在buf_block_t中</p>
<p>有些数据结构没有链的信息，例如自适应哈希索引，存的对象是记录，仅仅是个二进制串，对于这种对象，链的内存通过数据结构hash_table_struct的heap变量申请</p>
<p>InnoDB存储引擎，支持对各种类型对象进行查询</p>
<h4 id="24-双链表"><a class="markdownIt-Anchor" href="#24-双链表"></a> 2.4 双链表</h4>
<p>用于链接多个同类型的数据结构</p>
<p>如内存池中的内存块通过双链表管理</p>
<p>InnoDB中分为两种：组值内存对象的内存双链表和组值磁盘文件中数据的磁盘双链表</p>
<h5 id="241-内存双链表"><a class="markdownIt-Anchor" href="#241-内存双链表"></a> 2.4.1 内存双链表</h5>
<p>内存双链表是通常意义的双链表，用在InnoDB各个模块。缓冲池模块，事务处理模块，锁模块和文件系统模块等。</p>
<p>头尾指针节点LIST_BASE_NODE_T包含count（链表内节点数量）和头节点、尾节点</p>
<p>链表节点UT_LIST_NODE_T，每个被链接的对象必须是结构体而且包含链表节点对象。</p>
<h5 id="242-磁盘双链表"><a class="markdownIt-Anchor" href="#242-磁盘双链表"></a> 2.4.2 磁盘双链表</h5>
<p>磁盘双链表主要用在表空间管理模块、事务处理模块和B树模块，用于建立保存再磁盘中的数据结构的关系。由于磁盘数据库设备无法像内存通过指针随机访问，需要先把对于的磁盘块读到内存，再通过块内偏移找到所需数据</p>
<p>磁盘双链表和内存双链表的结构类似</p>
<p>基节点存放节点个数和头尾节点</p>
<p>链表节点除了前后指针，还包含fil_faddr_t，存放数据再磁盘的位置，类似内存指针。</p>
<p>FIL_ADDR_PAGE是页号的字节偏移，4个字节</p>
<p>FIL_ADDR_BYTE是页内地址偏移，站两个字节</p>
<h4 id="25-其他数据结构"><a class="markdownIt-Anchor" href="#25-其他数据结构"></a> 2.5 其他数据结构</h4>
<h5 id="251-动态数组"><a class="markdownIt-Anchor" href="#251-动态数组"></a> 2.5.1 动态数组</h5>
<p>InnoDB动态数组定义位dyn_array_t，主要用于mtr(小事务)模块，保存mtr中的锁和修改日志</p>
<p>动态数组基于块的方式扩展存储空间，每次申请DYN_ARRAY_DATA_SIZE(512B)的数组空间</p>
<p>初始化不动态分配数组空间，只初始化第一个块，不够用时分配新的内存块</p>
<h5 id="252-排序"><a class="markdownIt-Anchor" href="#252-排序"></a> 2.5.2 排序</h5>
<p>InnoDB通用的排序默认是基于合并算法进行排序，最坏复杂度log(n)。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/2.%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%92%8C%E7%AE%97%E6%B3%95/" data-id="ckmixc6t400045cvxcwke9ec3" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-1.innodb历史" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/1.innodb%E5%8E%86%E5%8F%B2/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:54:35.025Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h4 id="模块划分"><a class="markdownIt-Anchor" href="#模块划分"></a> 模块划分</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210309135527897.png" alt="image-20210309135527897" /></p>
<p>File Manager：封装了InnoDB对文件的各类操作，读、写、异步I/O</p>
<p>Concurrency Manager：主要封装了引擎内部使用的各类mutex和latch</p>
<p>Common Utility：封装了基本的 数据结构和算法定义，如链表，哈希表</p>
<p>虚线部分是InnoDB的内核实现部分，是InnoDB存储引擎事务、锁、缓存、日志、存储、索引的实现模块</p>
<p>上面两层是接口层，实现与上层与存储引擎的内部互动。InnoDB可以不依赖MySQL数据库，作为一个嵌入式数据库，所有还有嵌入式接口。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/1.innodb%E5%8E%86%E5%8F%B2/" data-id="ckmixc6sr00005cvxgb2xdjqf" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-算法/链表" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.711Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E7%AE%97%E6%B3%95/%E9%93%BE%E8%A1%A8/" data-id="ckmixaefy0000asvxct2z6lj4" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-面经/java/集合" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E9%9D%A2%E7%BB%8F/java/%E9%9B%86%E5%90%88/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.613Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="1-如何决定使用hashmap还是treemap"><a class="markdownIt-Anchor" href="#1-如何决定使用hashmap还是treemap"></a> 1、如何决定使用HashMap还是TreeMap</h3>
<p>TreeMap的key要求实现java.lang.Comparable，迭代是默认按key升序排序。TreeMap基于红黑树，适用于自然顺序或自定义顺序的key。（就是红黑树，没有数组）</p>
<p>HashMap的key值实现散列hashCode()，分布散列均匀，不支持排序。</p>
<p>当需要得到有序的结果，就使用TreeMap，除此之外，因为HashMap有更好的性能，使用HashMap</p>
<ol>
<li>
<p>HashMap和TreeMap实现：</p>
<p>HashMap基于哈希表实现。使用HashMap要求key明确定义了hashCode和equals方法（可以重写），还可以对初始容量和负载因子调优</p>
<p>TreeMap基于红黑树实现，一直处于平衡状态，不能调优</p>
</li>
<li>
<p>HashMap和TreeMap都是线程不安全</p>
<p>HashMap继承了AbstractMap抽象类，TreeMap继承了SortedMap接口</p>
<p><strong>AbstractMap抽象类</strong>：覆盖了hashCode和equals方法，确保两个相等映射返回同样的hashCode。（映射大小相等，key相等并且值相等，就认为映射相等）映射的hashCode是映射的全部元素的hashCode总和。</p>
<p><strong>SortedMap接口</strong>：原来保证键的有序性。SortedMap为映像的视图（子集），包括两个端点提供了访问方法。除了排序是作用于映射的键外，处理SortedMap和SortedSet一样。添加到SortedMap的元素必须实现Comparable接口，否则必须给他的构造函数提供一个Comparator接口的实现。TreeMap是唯一实现</p>
</li>
<li>
<p>TreeMap默认是升序，如何降序</p>
<p>通过自定义比较器，实现Comparator接口，重写compare方法，传入TreeMap构造器</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E9%9D%A2%E7%BB%8F/java/%E9%9B%86%E5%90%88/" data-id="ckmixaeh5000uasvxf7jp9s9j" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-计算机网络/6.应用层" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6.%E5%BA%94%E7%94%A8%E5%B1%82/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.585Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="应用层"><a class="markdownIt-Anchor" href="#应用层"></a> 应用层</h3>
<h4 id="应用层概述"><a class="markdownIt-Anchor" href="#应用层概述"></a> 应用层概述</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307160050150.png" alt="image-20210307160050150" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307160203854.png" alt="image-20210307160203854" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307160226061.png" alt="image-20210307160226061" /></p>
<h4 id="动态主机配置dhcp"><a class="markdownIt-Anchor" href="#动态主机配置dhcp"></a> 动态主机配置DHCP</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161013853.png" alt="image-20210307161013853" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161037097.png" alt="image-20210307161037097" /></p>
<h4 id="动态域名系统nds"><a class="markdownIt-Anchor" href="#动态域名系统nds"></a> 动态域名系统NDS</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161156042.png" alt="image-20210307161156042" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161240542.png" alt="image-20210307161240542" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161403725.png" alt="image-20210307161403725" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161436406.png" alt="image-20210307161436406" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161514348.png" alt="image-20210307161514348" /></p>
<h4 id="文件传输协议ftp"><a class="markdownIt-Anchor" href="#文件传输协议ftp"></a> 文件传输协议FTP</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161547640.png" alt="image-20210307161547640" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161819335.png" alt="image-20210307161819335" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161837795.png" alt="image-20210307161837795" /></p>
<h4 id="电子邮件"><a class="markdownIt-Anchor" href="#电子邮件"></a> 电子邮件</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161915114.png" alt="image-20210307161915114" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161938348.png" alt="image-20210307161938348" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307161953057.png" alt="image-20210307161953057" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162054826.png" alt="image-20210307162054826" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162105891.png" alt="image-20210307162105891" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162125205.png" alt="image-20210307162125205" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162151244.png" alt="image-20210307162151244" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162225334.png" alt="image-20210307162225334" /></p>
<h4 id="万维网www"><a class="markdownIt-Anchor" href="#万维网www"></a> 万维网WWW</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162306886.png" alt="image-20210307162306886" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162320178.png" alt="image-20210307162320178" /></p>
<p><img src="G:%5C%E5%AD%A6%E4%B9%A0%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%5Cimage-20210307162335404.png" alt="image-20210307162335404" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162417129.png" alt="image-20210307162417129" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162435448.png" alt="image-20210307162435448" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162446992.png" alt="image-20210307162446992" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307162533578.png" alt="image-20210307162533578" /></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/6.%E5%BA%94%E7%94%A8%E5%B1%82/" data-id="ckmixaegx000gasvxa3z466vk" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-计算机网络/5.传输层" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E4%BC%A0%E8%BE%93%E5%B1%82/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.575Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="运输层"><a class="markdownIt-Anchor" href="#运输层"></a> 运输层</h3>
<h4 id="运输层概述"><a class="markdownIt-Anchor" href="#运输层概述"></a> 运输层概述</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150528010.png" alt="image-20210307150528010" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150603680.png" alt="image-20210307150603680" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150703034.png" alt="image-20210307150703034" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150745571.png" alt="image-20210307150745571" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150826265.png" alt="image-20210307150826265" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151335900.png" alt="image-20210307151335900" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151056806.png" alt="image-20210307151056806" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151136763.png" alt="image-20210307151136763" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151215375.png" alt="image-20210307151215375" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151258779.png" alt="image-20210307151258779" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151317182.png" alt="image-20210307151317182" /></p>
<h4 id="tcp"><a class="markdownIt-Anchor" href="#tcp"></a> TCP</h4>
<h5 id="tcp流量控制"><a class="markdownIt-Anchor" href="#tcp流量控制"></a> TCP流量控制</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151546430.png" alt="image-20210307151546430" /></p>
<h5 id="tcp拥塞控制"><a class="markdownIt-Anchor" href="#tcp拥塞控制"></a> TCP拥塞控制</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151641574.png" alt="image-20210307151641574" /></p>
<p>四种控制算法：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151710250.png" alt="image-20210307151710250" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151839718.png" alt="image-20210307151839718" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307151913672.png" alt="image-20210307151913672" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307152000298.png" alt="image-20210307152000298" /></p>
<p>快恢复算法：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307152027924.png" alt="image-20210307152027924" /></p>
<h5 id="tcp超时重传选择"><a class="markdownIt-Anchor" href="#tcp超时重传选择"></a> TCP超时重传选择</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307152409832.png" alt="image-20210307152409832" /></p>
<h5 id="tcp可靠传输的实现"><a class="markdownIt-Anchor" href="#tcp可靠传输的实现"></a> TCP可靠传输的实现</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307152831255.png" alt="image-20210307152831255" /></p>
<h5 id="tcp连接"><a class="markdownIt-Anchor" href="#tcp连接"></a> TCP连接</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307152930649.png" alt="image-20210307152930649" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307152940084.png" alt="image-20210307152940084" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307153328035.png" alt="image-20210307153328035" /></p>
<p>SYN：同步标志位，1表示是TCP请求报文段，不能带数据，消耗一个序号</p>
<p>ACK：确认位</p>
<p>seq：序号为，x和y分别是客户端和服务器自己选择的开始序号</p>
<p>ack：确认号字段，对哪个序号的确认</p>
<p>第三次握手是普通的确认，所以可以携带数据 不携带数据不消化seq</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307154533461.png" alt="image-20210307154533461" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307154615194.png" alt="image-20210307154615194" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307154712082.png" alt="image-20210307154712082" /></p>
<h5 id="tcp报文首部"><a class="markdownIt-Anchor" href="#tcp报文首部"></a> TCP报文首部</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307154803011.png" alt="image-20210307154803011" /></p>
<p>序号：32比特，0-2^32 -1，最大后从0开始，指示本TCP报文段数据载荷的第一个自己的序号</p>
<p>确认号：32比特，0-2^32 -1，最大后从0开始，指出期望收到下一个TCP报文段的序号，也是对之前数据的确认</p>
<p>确认标志位ACK：ACK为1时，确认号才有效，0时无效</p>
<p>数据偏移：TCP报文段数据载荷部分距TCP报文段起始的距离，就是TCP报文首部的长度，最小20字节，最大60字节，要用值*4</p>
<p>保留字段：以后使用，目前置0</p>
<p>窗口：16比特，发送本报文段的一方的接收窗口的大小</p>
<p>校验和：16比特，检测误码，要在TCP报文首部加12字节委首部</p>
<p>同步标志位SYN：TCP建立时同步序号</p>
<p>中止表示为FIN：释放TCP连接</p>
<p>复位标志位RST：复位TCP连接，RST=1表示出现异常，需要释放连接再重新建立连接，RST=1还可以拒绝非法报文或拒绝TCP连接</p>
<p>推送标志位PSH：接受方接收到PSH=1，会尽快交付应用进程，不必等到接收缓存满再交付</p>
<p>紧急标志位URG和紧急指针实现紧急操作：URG=1，紧急字段有效，紧急字段指明紧急数据的长度</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307155805787.png" alt="image-20210307155805787" /></p>
<p>选项部分：增加TCP功能</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307155849596.png" alt="image-20210307155849596" /></p>
<p>填充：保证TCP是4的整数倍</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/5.%E4%BC%A0%E8%BE%93%E5%B1%82/" data-id="ckmixaegw000fasvx6gqj0oi4" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-计算机网络/4.网络层" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.%E7%BD%91%E7%BB%9C%E5%B1%82/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.549Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="网络层"><a class="markdownIt-Anchor" href="#网络层"></a> 网络层</h3>
<h4 id="网络层概述"><a class="markdownIt-Anchor" href="#网络层概述"></a> 网络层概述</h4>
<p>实现网络互联，进而实现数据包在网络之间传输</p>
<p>解决的问题：</p>
<ol>
<li>
<p>网络层向上层提供的服务（TPC/IP是无连接的不可靠的数据报服务）</p>
</li>
<li>
<p>网络层寻址</p>
</li>
<li>
<p>路由寻址</p>
</li>
</ol>
<p>因特网是用户最多的互联网，使用TCP/IP协议，网际层还包括ARP、ICMP、IGMP等</p>
<h4 id="网络层的两种服务"><a class="markdownIt-Anchor" href="#网络层的两种服务"></a> 网络层的两种服务</h4>
<p>面向连接的虚电路服务：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133302112.png" alt="image-20210307133302112" /></p>
<p>无连接的数据报服务：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133339352.png" alt="image-20210307133339352" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133405517.png" alt="image-20210307133405517" /></p>
<h4 id="ipv4"><a class="markdownIt-Anchor" href="#ipv4"></a> IPv4</h4>
<p>IPv4是给因特网上的每个主机/路由器的每个接口分配一个唯一的32比特标识符</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133527173.png" alt="image-20210307133527173" /></p>
<h5 id="分类编制的ipv4地址"><a class="markdownIt-Anchor" href="#分类编制的ipv4地址"></a> 分类编制的IPv4地址</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133658139.png" alt="image-20210307133658139" /></p>
<p>A类网络：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133822957.png" alt="image-20210307133822957" /></p>
<p>B类网络：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307133919174.png" alt="image-20210307133919174" /></p>
<p>C类网络：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307134011780.png" alt="image-20210307134011780" /></p>
<h5 id="划分子网的ipv4"><a class="markdownIt-Anchor" href="#划分子网的ipv4"></a> 划分子网的IPv4</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307134245242.png" alt="image-20210307134245242" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307134421038.png" alt="image-20210307134421038" /></p>
<h5 id="无分类编制的ipv4"><a class="markdownIt-Anchor" href="#无分类编制的ipv4"></a> 无分类编制的IPv4</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307134543146.png" alt="image-20210307134543146" /></p>
<p>路由聚合：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307134849423.png" alt="image-20210307134849423" /></p>
<h5 id="ipv4地址的应用规划"><a class="markdownIt-Anchor" href="#ipv4地址的应用规划"></a> IPv4地址的应用规划</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307135627577.png" alt="image-20210307135627577" /></p>
<h5 id="ipv4发送和转发"><a class="markdownIt-Anchor" href="#ipv4发送和转发"></a> IPv4发送和转发</h5>
<ol>
<li>
<p>主机发送IP数据报</p>
<p>1）源主机如何知道目的主机是否与自己同一个网络：比较目的主机/源主机与子网掩码相与的结果</p>
<p>2）主机如何知道路由器的存在：默认网关</p>
</li>
<li>
<p>路由器转发IP数据报</p>
<p>1）检查IP数据报首部是否出错，出错就丢弃该IP数据报并发送ICMP差错报告报文通告源主机</p>
<p>2）根据目的地址IP在路由表查找匹配的端口条目，找到就转发，找不到丢弃IP数据报并通过源主机</p>
<p>3）路由器隔离广播域</p>
</li>
</ol>
<h5 id="ipv4数据报首部格式"><a class="markdownIt-Anchor" href="#ipv4数据报首部格式"></a> IPv4数据报首部格式</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307143242835.png" alt="image-20210307143242835" /></p>
<p>版本：表示IP协议版本号，通信双方必须一致，广泛使用的版本号是4（IPv4)</p>
<p>首部长度：数据报首部长度，最小是十进制的5，表示首部只有20字节固定部分，最大取十进制15，表示包含20字节固定部分和40字节可变部分</p>
<p>可选字段：从1-40不等，支持排错，测量及安全措施，增加了功能也增加了开销，很少使用</p>
<p>填充字段，保证数据报是4字节的整数倍</p>
<p>区分服务：用来获得更换的服务，一般不使用</p>
<p>总长度：表示ip数据报的总长度，首部+数据载荷，最大值是10进制的65535</p>
<p>生存时间：最初以秒为单位，最大生存周期255秒，转发数据报时，减去在路由器上花费的时间，不为0就转发，现在为跳数，每个路由器减1，不为0就转发</p>
<p>协议：指明IPv4的数据部分是何种数据协议单元</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307144427393.png" alt="image-20210307144427393" /></p>
<p>首部检验和：用来检测首部在传输过程种是否出错，比CRC简单，成为因特网检验和，因为IP不提供可靠服务，IPv6不再检验</p>
<p>源IP地址和目的IP地址</p>
<p>标识、标志、片偏移：当数据报大于数据链路层协议的帧的数据载荷的最大长度MTU（以太网1500字节），就需要分片</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307144000626.png" alt="image-20210307144000626" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307143846304.png" alt="image-20210307143846304" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307144206846.png" alt="image-20210307144206846" /></p>
<p>片偏移必须为整数</p>
<h4 id="路由"><a class="markdownIt-Anchor" href="#路由"></a> 路由</h4>
<h5 id="静态路由配置及可能的问题"><a class="markdownIt-Anchor" href="#静态路由配置及可能的问题"></a> 静态路由配置及可能的问题</h5>
<ol>
<li>配置错误可能出现路由环路</li>
</ol>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307140819790.png" alt="image-20210307140819790" /></p>
<ol start="2">
<li>聚合了不存在的网络可能导致路由环路</li>
</ol>
<h5 id="路由选择协议"><a class="markdownIt-Anchor" href="#路由选择协议"></a> 路由选择协议</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141053970.png" alt="image-20210307141053970" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141104242.png" alt="image-20210307141104242" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141126055.png" alt="image-20210307141126055" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141158373.png" alt="image-20210307141158373" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307143029067.png" alt="image-20210307143029067" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141314375.png" alt="image-20210307141314375" /></p>
<h5 id="路由信息协议rip"><a class="markdownIt-Anchor" href="#路由信息协议rip"></a> 路由信息协议RIP</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141419109.png" alt="image-20210307141419109" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141524495.png" alt="image-20210307141524495" /></p>
<p>基本工作过程</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141546317.png" alt="image-20210307141546317" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141727392.png" alt="image-20210307141727392" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141845381.png" alt="image-20210307141845381" /></p>
<h5 id="开放最短路径优先协议ospf"><a class="markdownIt-Anchor" href="#开放最短路径优先协议ospf"></a> 开放最短路径优先协议OSPF</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307141938309.png" alt="image-20210307141938309" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142035173.png" alt="image-20210307142035173" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142130750.png" alt="image-20210307142130750" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142201656.png" alt="image-20210307142201656" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142221261.png" alt="image-20210307142221261" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142300955.png" alt="image-20210307142300955" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142340434.png" alt="image-20210307142340434" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142507238.png" alt="image-20210307142507238" /></p>
<h5 id="边界网关协议bgp"><a class="markdownIt-Anchor" href="#边界网关协议bgp"></a> 边界网关协议BGP</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142605776.png" alt="image-20210307142605776" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142713356.png" alt="image-20210307142713356" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142749670.png" alt="image-20210307142749670" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142811611.png" alt="image-20210307142811611" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307142906020.png" alt="image-20210307142906020" /></p>
<h4 id="网际控制报文协议icmp"><a class="markdownIt-Anchor" href="#网际控制报文协议icmp"></a> 网际控制报文协议ICMP</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145309092.png" alt="image-20210307145309092" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145329640.png" alt="image-20210307145329640" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145353768.png" alt="image-20210307145353768" /></p>
<p>ICMP应用举例</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145427843.png" alt="image-20210307145427843" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145448884.png" alt="image-20210307145448884" /></p>
<h4 id="虚拟专用网络vpn"><a class="markdownIt-Anchor" href="#虚拟专用网络vpn"></a> 虚拟专用网络VPN</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145630670.png" alt="image-20210307145630670" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145715815.png" alt="image-20210307145715815" /></p>
<p>因特网路由器对所有目的地址是私有地址的IP数据报不转发</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145834722.png" alt="image-20210307145834722" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145857575.png" alt="image-20210307145857575" /></p>
<h4 id="物理地址转换nat"><a class="markdownIt-Anchor" href="#物理地址转换nat"></a> 物理地址转换NAT</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307145923249.png" alt="image-20210307145923249" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150130184.png" alt="image-20210307150130184" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150144638.png" alt="image-20210307150144638" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210307150152773.png" alt="image-20210307150152773" /></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/4.%E7%BD%91%E7%BB%9C%E5%B1%82/" data-id="ckmixaegv000easvx3w9tdhkz" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-计算机网络/3.数据链路层" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3.%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.539Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="数据链路层"><a class="markdownIt-Anchor" href="#数据链路层"></a> 数据链路层</h3>
<h4 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h4>
<p>链路：从一个节点到相邻节点的一段物理线路，中间没有其他交换节点</p>
<p>数据链路：把实现通信协议的硬件和软件加到链路上就构成了数据链路</p>
<h4 id="封装成帧"><a class="markdownIt-Anchor" href="#封装成帧"></a> 封装成帧</h4>
<p>将数据链路层上层交付的协议数据单元添加帧头和帧尾使之成为帧</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305151925734.png" alt="image-20210305151925734" /></p>
<p>帧头和帧尾的作用之一就是帧定界，用于区分一个个帧的范围，例如ppp的开头和结尾标志，MAC帧没有，</p>
<p>物理层会给MAC增加8个字节前导码，前七个字节是前同步码，还有一个是帧开始定界符，MAC还有96比特的帧间间隔 不需要结束标志</p>
<p>链路层会对数据定义帧定界符进行转义</p>
<p>每个数据链路层协议都规定了帧数据单元的长度上限，最大传输单元（MTU）</p>
<h4 id="差错检测"><a class="markdownIt-Anchor" href="#差错检测"></a> 差错检测</h4>
<p>传输错误比特占传输比特总数的比率称为误码率BER</p>
<p>MAC帧和ppp的帧检验序列FCS用于检测是否误码</p>
<p>校验方式：奇偶校验、循环冗余校验CRC</p>
<h4 id="可靠传输"><a class="markdownIt-Anchor" href="#可靠传输"></a> 可靠传输</h4>
<p>不可靠传输服务：仅仅丢弃误码的帧，什么也不做</p>
<p>可靠传输服务：发送端发什么，接收端收什么</p>
<p>有线链路误码率较低，所以不要求数据链路层向上提供可靠传输服务</p>
<p>无线链路误码率较高，要求数据链路层必须向上提高可靠传输服务</p>
<p>传出差错：比特差错、分组丢失、分组失序、分组重复（分组意味着差错不局限于数据链路层）</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305153457051.png" alt="image-20210305153457051" /></p>
<h5 id="停止等待协议sw"><a class="markdownIt-Anchor" href="#停止等待协议sw"></a> 停止等待协议SW</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305153939667.png" alt="image-20210305153939667" /></p>
<p>当往返时延RTT远大于帧发送时延时，信道利用率极低</p>
<h5 id="回退n帧协议gbngo-back-n"><a class="markdownIt-Anchor" href="#回退n帧协议gbngo-back-n"></a> 回退N帧协议GBN（Go-back-N）</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305154114567.png" alt="image-20210305154114567" /></p>
<h5 id="选择重传协议sr"><a class="markdownIt-Anchor" href="#选择重传协议sr"></a> 选择重传协议SR</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305154318157.png" alt="image-20210305154318157" /></p>
<h4 id="点对点协议ppppoint-to-point-protocol"><a class="markdownIt-Anchor" href="#点对点协议ppppoint-to-point-protocol"></a> 点对点协议PPP（Point-to-Point Protocol）</h4>
<p>ppp协议为点对点的数据链路层各协议数据包提供了一个标准</p>
<ol>
<li>对各协议数据报的封装方法（封装成帧）</li>
<li>链路控制协议LCP（用于建立、配置以及测试数据链路的连接）</li>
<li>一套网络控制协议NCPs（其中每一个协议支持不同的网络层协议）</li>
</ol>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305154725880.png" alt="image-20210305154725880" /></p>
<p>帧格式：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305154758893.png" alt="image-20210305154758893" /></p>
<p>透明传输：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305154841260.png" alt="image-20210305154841260" /></p>
<p>差错检测：使用CRC检验</p>
<p>提供不可靠服务</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305154932465.png" alt="image-20210305154932465" /></p>
<p>工作状态：</p>
<p><img src="G:%5C%E5%AD%A6%E4%B9%A0%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%5Cimage-20210305155039449.png" alt="image-20210305155039449" /></p>
<h4 id="媒体介入控制mac"><a class="markdownIt-Anchor" href="#媒体介入控制mac"></a> 媒体介入控制MAC</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305155230269.png" alt="image-20210305155230269" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305155247052.png" alt="image-20210305155247052" /></p>
<p>静态划分信道：频分复用FDM、时分复用TDM、波分复用WDM、码分复用CDM</p>
<h5 id="随机接入"><a class="markdownIt-Anchor" href="#随机接入"></a> 随机接入</h5>
<p>CSMA—CD（载波监听多址接入-碰撞检测   Carrier Sense Multiple Access-Collision Detection）</p>
<p>CS：每个站点发送帧前要先监听总线是否有其他站点发送帧，总线空闲96比特才能发送</p>
<p>MA：多个站点连接再一条总线</p>
<p>CD：站点边发送边检测碰撞，碰撞后立即停止发送，退避随机事件后发送</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160038108.png" alt="image-20210305160038108" /></p>
<p>争用期：<img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160151099.png" alt="image-20210305160151099" /></p>
<p>最小帧长：<img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160236069.png" alt="image-20210305160236069" /></p>
<p>最大帧长：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160343783.png" alt="image-20210305160343783" /></p>
<p>截断二进制指数退避算法：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160427761.png" alt="image-20210305160427761" /></p>
<p>帧发送流程</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160512449.png" alt="image-20210305160512449" /></p>
<p>帧接收流程</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160538902.png" alt="image-20210305160538902" /></p>
<p>CSMA-CA</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160837356.png" alt="image-20210305160837356" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305160942724.png" alt="image-20210305160942724" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161012872.png" alt="image-20210305161012872" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161140096.png" alt="image-20210305161140096" /></p>
<p>退避算法：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161227434.png" alt="image-20210305161227434" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161302601.png" alt="image-20210305161302601" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161404087.png" alt="image-20210305161404087" /></p>
<h4 id="maciparp"><a class="markdownIt-Anchor" href="#maciparp"></a> MAC/IP/ARP</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161451664.png" alt="image-20210305161451664" /></p>
<h5 id="mac"><a class="markdownIt-Anchor" href="#mac"></a> MAC</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161604424.png" alt="image-20210305161604424" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161750068.png" alt="image-20210305161750068" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305161933910.png" alt="image-20210305161933910" /></p>
<h5 id="ip"><a class="markdownIt-Anchor" href="#ip"></a> IP</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305162050074.png" alt="image-20210305162050074" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305162148528.png" alt="image-20210305162148528" /></p>
<h5 id="arp地址解析协议"><a class="markdownIt-Anchor" href="#arp地址解析协议"></a> ARP（地址解析协议）</h5>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305162406139.png" alt="image-20210305162406139" /></p>
<h4 id="集线器和交换机"><a class="markdownIt-Anchor" href="#集线器和交换机"></a> 集线器和交换机</h4>
<p>集线器：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305162511460.png" alt="image-20210305162511460" /></p>
<p>交换机：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305162705150.png" alt="image-20210305162705150" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305162830630.png" alt="image-20210305162830630" /></p>
<p>交换机自学习和转发帧：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163052514.png" alt="image-20210305163052514" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163108756.png" alt="image-20210305163108756" /></p>
<p>以太网交换机生成树协议STP</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163213345.png" alt="image-20210305163213345" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163234884.png" alt="image-20210305163234884" /></p>
<h4 id="虚拟局域网vlan"><a class="markdownIt-Anchor" href="#虚拟局域网vlan"></a> 虚拟局域网VLAN</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163309932.png" alt="image-20210305163309932" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163327093.png" alt="image-20210305163327093" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163339885.png" alt="image-20210305163339885" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163406495.png" alt="image-20210305163406495" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163446017.png" alt="image-20210305163446017" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163459916.png" alt="image-20210305163459916" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163512718.png" alt="image-20210305163512718" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163710896.png" alt="image-20210305163710896" /></p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305163721422.png" alt="image-20210305163721422" /></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/3.%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" data-id="ckmixaegv000dasvx8yq1hfni" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  
    <article id="post-计算机网络/2.物理层" class="wow slideInRight article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2.%E7%89%A9%E7%90%86%E5%B1%82/" class="article-date">
  <time class="post-time" datetime="2021-03-21T08:53:05.521Z" itemprop="datePublished">
    <span class="post-month">3月</span><br/>
    <span class="post-day">21</span>
  </time>
</a>
   
  </div>
  <div class="article-inner">
    
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="物理层"><a class="markdownIt-Anchor" href="#物理层"></a> 物理层</h3>
<h4 id="传输媒体"><a class="markdownIt-Anchor" href="#传输媒体"></a> 传输媒体</h4>
<p>导引型传输媒体：双绞线、同轴电缆、光纤</p>
<p>非导引型传输媒体：微波通信(2-40GHZ)、无线电波、红外线、可见光</p>
<h4 id="协议任务"><a class="markdownIt-Anchor" href="#协议任务"></a> 协议任务</h4>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305143849954.png" alt="image-20210305143849954" /></p>
<p>物理层考虑的是怎样才能再连接计算机的传输媒体上传输数据比特流</p>
<h4 id="传输方式"><a class="markdownIt-Anchor" href="#传输方式"></a> 传输方式</h4>
<p>串行传输：数据一个比特一个比特的发   远距离传输采用串行传输</p>
<p>并行传输：多个比特同时发送，需要n条传输线路、计算机内部总线等采用并行传输</p>
<p>同步传输：发送方和接收方的时钟频率同步保证不会出现误差累积</p>
<p>​	1.外同步：收发双发加一条单独的时钟信号先</p>
<p>​	2.内同步：发送方将时钟同步信号编码到发送的数据中，如曼彻斯特编码</p>
<p>异步传输：以字节为单位独立传输，接受发从每个字节起始处对字节内比特实现同步，所以每个字节前后要加上起始位和结束位，异步是指字节之间异步</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305144617911.png" alt="image-20210305144617911" /></p>
<p>单向通信：</p>
<p>双向交替通信：</p>
<p>双向同步通信：</p>
<h4 id="编码与调制"><a class="markdownIt-Anchor" href="#编码与调制"></a> 编码与调制</h4>
<p>编码：把数字/模拟信号变为数字信号</p>
<p>调制：把数字/模拟信号变为模拟信号</p>
<p>码元：代表不同离散数值的基本波形</p>
<p>信道：一般是传输媒体中的传递通道</p>
<p>计算机一般采用将数字基带信号编码调制再发送</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305144944031.png" alt="image-20210305144944031" /></p>
<p>常见编码：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305145223370.png" alt="image-20210305145223370" /></p>
<p>基本调制：</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305145258592.png" alt="image-20210305145258592" /></p>
<p>混合调制：使一个码元包含多个比特信息</p>
<h4 id="信道极限容量"><a class="markdownIt-Anchor" href="#信道极限容量"></a> 信道极限容量</h4>
<p>传输失真：<img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305145421893.png" alt="image-20210305145421893" /></p>
<p>乃式准则：为了避免码间干扰，传输速度是有上限的</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305145602936.png" alt="image-20210305145602936" /></p>
<p>香农公式：带宽受限且有高斯白噪声干扰的信道的极限信息速传输速率</p>
<p><img src="C:%5CUsers%5Cslorui%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210305145656909.png" alt="image-20210305145656909" /></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/21/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/2.%E7%89%A9%E7%90%86%E5%B1%82/" data-id="ckmixaegu000casvxfgp55x8x" class="article-share-link">分享</a>
      
      
    </footer>
  </div>
  
</article>




  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/">&amp;laquo; pre</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/3/">next &amp;raquo;</a>
  </nav>
</section>
        
          <aside id="sidebar">
  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <h1 class="blog-title">Hexo</h1>
    <h2 class="blog-subtitle"></h2>
    <ul class="blog-link">
     
          <a href="/" title="Home">
            <li>主页</li>
          </a>
        
          <a href="/archives" title="Archives">
            <li>归档</li>
          </a>
        
          <a href="/categories" title="Categories">
            <li>分类</li>
          </a>
        
          <a href="/tags" title="Tags">
            <li>标签</li>
          </a>
        
    </ul>
  </div>
</div>

  
    <div class="widget-wrap">
  <h3 class="widget-title"></h3>
  <div class="widget">
    <img class="avatar" src="https://avatars0.githubusercontent.com/u/20333903?v=3&amp;s=460">
    <h2 class="author">John Doe</h2>
    <h3 class="description"></h3>
    <div class="count-box">
      <a href="/archives"><div><strong>45</strong><br>文章</div></a>
      <a href="/categories"><div><strong>0</strong><br>分类</div></a>
      <a href="/tags"><div><strong>0</strong><br>标签</div></a>
    </div>



    <div class="social-link">
      
        <a class="hvr-bounce-in" href="http://github.com/slorui" target="_blank" title="Github">
          Github
        </a>
      
    </div>

    <div class="friend-link">
      <h2>友情链接</h2>
      
        <a class="hvr-bounce-in" href="" target="_blank" title="ShanaMaid">
          ShanaMaid
        </a>
      
    </div>
  </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy;2020 - 2021 John Doe<br>
      由<a href="http://hexo.io/" target="_blank">Hexo</a>强力驱动 | 
      主题-<a target="_blank" rel="noopener" href="https://github.com/ShanaMaid/hexo-theme-shana">Shana</a>
      
    </div>
    
  </div>
</footer>
    </div>
    

<script src="//apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="//apps.bdimg.com/libs/wow/0.1.6/wow.min.js"></script>
<script>
new WOW().init();
</script>   


  
<link rel="stylesheet" href="/plugin/fancybox/jquery.fancybox.css">

  
<script src="/plugin/fancybox/jquery.fancybox.pack.js"></script>




  
<link rel="stylesheet" href="/plugin/galmenu/GalMenu.css">

  
<script src="/plugin/galmenu/GalMenu.js"></script>

  <div class="GalMenu GalDropDown">
      <div class="circle" id="gal">
        <div class="ring">
          
            <a href="/" title="" class="menuItem">首页</a>
          
            <a href="/tags" title="" class="menuItem">标签</a>
          
            <a href="/categories" title="" class="menuItem">分类</a>
          
            <a href="/archives" title="" class="menuItem">归档</a>
          
            <a href="/xxxxxxxxx" title="" class="menuItem">xxx</a>
          
            <a href="/xxxxxxx" title="" class="menuItem">xxxx</a>
          
        </div>
        
          <audio id="audio" src="#"></audio>
        
      </div> 
</div>
<div id="overlay" style="opacity: 1; cursor: pointer;"></div>
  <script type="text/javascript">var items = document.querySelectorAll('.menuItem');
    for (var i = 0,
    l = items.length; i < l; i++) {
      items[i].style.left = (50 - 35 * Math.cos( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%";
      items[i].style.top = (50 + 35 * Math.sin( - 0.5 * Math.PI - 2 * (1 / l) * i * Math.PI)).toFixed(4) + "%"
    }</script>
<script type="text/javascript">
  $(document).ready(function() {
    $('body').GalMenu({
      'menu': 'GalDropDown'
    })
  });
</script>

  <section class="hidden-xs"> 
  <ul class="cb-slideshow"> 
    <li><span>苟利</span></li> 
    <li><span>国家</span></li> 
    <li><span>生死以</span></li> 
    <li><span>岂能</span></li> 
    <li><span>祸福</span></li> 
    <li><span>趋避之</span></li> 
  </ul>
</section>

<script src="/js/script.js"></script>




  </div>
</body>
</html>